{
  "annotations": {
    "list": [
      {
        "builtIn": 1,
        "datasource": "-- Grafana --",
        "enable": true,
        "hide": true,
        "iconColor": "rgba(0, 211, 255, 1)",
        "name": "Annotations & Alerts",
        "type": "dashboard"
      }
    ]
  },
  "title": "Transaction API - SLO Dashboard",
  "description": "Service Level Objectives compliance and error budget tracking",
  "uid": "transaction-api-slo",
  "tags": ["transaction-api", "slo", "error-budget"],
  "timezone": "browser",
  "editable": true,
  "graphTooltip": 1,
  "time": {
    "from": "now-30d",
    "to": "now"
  },
  "timepicker": {
    "refresh_intervals": ["1m", "5m", "15m", "30m", "1h", "2h", "1d"]
  },
  "panels": [
    {
      "type": "row",
      "title": "SLO Summary",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 0},
      "id": 1,
      "collapsed": false
    },
    {
      "type": "stat",
      "title": "SLO 1: API Availability (99.95%)",
      "datasource": "Prometheus",
      "gridPos": {"h": 6, "w": 6, "x": 0, "y": 1},
      "id": 10,
      "targets": [
        {
          "expr": "slo:api_availability:success_ratio:30d * 100",
          "refId": "A"
        }
      ],
      "options": {
        "reduceOptions": {
          "values": false,
          "calcs": ["lastNotNull"]
        },
        "orientation": "auto",
        "textMode": "value_and_name",
        "colorMode": "value",
        "graphMode": "area",
        "justifyMode": "auto"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 3,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"value": null, "color": "red"},
              {"value": 99.9, "color": "orange"},
              {"value": 99.95, "color": "green"}
            ]
          },
          "max": 100,
          "min": 99
        }
      }
    },
    {
      "type": "stat",
      "title": "SLO 2: API Latency P95 (<200ms)",
      "datasource": "Prometheus",
      "gridPos": {"h": 6, "w": 6, "x": 6, "y": 1},
      "id": 11,
      "targets": [
        {
          "expr": "histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{app=\"transaction-api\"}[7d])) by (le)) * 1000",
          "refId": "A"
        }
      ],
      "options": {
        "reduceOptions": {
          "values": false,
          "calcs": ["lastNotNull"]
        },
        "orientation": "auto",
        "textMode": "value_and_name",
        "colorMode": "value",
        "graphMode": "area"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "ms",
          "decimals": 0,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"value": null, "color": "green"},
              {"value": 180, "color": "yellow"},
              {"value": 200, "color": "red"}
            ]
          },
          "max": 500
        }
      }
    },
    {
      "type": "stat",
      "title": "SLO 3: Transaction Success (99.9%)",
      "datasource": "Prometheus",
      "gridPos": {"h": 6, "w": 6, "x": 12, "y": 1},
      "id": 12,
      "targets": [
        {
          "expr": "slo:transaction_success:success_ratio:7d * 100",
          "refId": "A"
        }
      ],
      "options": {
        "reduceOptions": {
          "values": false,
          "calcs": ["lastNotNull"]
        },
        "orientation": "auto",
        "textMode": "value_and_name",
        "colorMode": "value",
        "graphMode": "area"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 3,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"value": null, "color": "red"},
              {"value": 99.5, "color": "orange"},
              {"value": 99.9, "color": "green"}
            ]
          },
          "max": 100,
          "min": 99
        }
      }
    },
    {
      "type": "stat",
      "title": "SLO 4: Transaction Latency P95 (<2s)",
      "datasource": "Prometheus",
      "gridPos": {"h": 6, "w": 6, "x": 18, "y": 1},
      "id": 13,
      "targets": [
        {
          "expr": "histogram_quantile(0.95, sum(rate(transaction_processing_duration_seconds_bucket{app=\"transaction-api\"}[24h])) by (le))",
          "refId": "A"
        }
      ],
      "options": {
        "reduceOptions": {
          "values": false,
          "calcs": ["lastNotNull"]
        },
        "orientation": "auto",
        "textMode": "value_and_name",
        "colorMode": "value",
        "graphMode": "area"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "s",
          "decimals": 2,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"value": null, "color": "green"},
              {"value": 1.8, "color": "yellow"},
              {"value": 2.0, "color": "red"}
            ]
          },
          "max": 5
        }
      }
    },
    {
      "type": "row",
      "title": "Error Budget Status",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 7},
      "id": 2,
      "collapsed": false
    },
    {
      "type": "gauge",
      "title": "API Availability Error Budget Remaining",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 8, "x": 0, "y": 8},
      "id": 20,
      "targets": [
        {
          "expr": "slo:api_availability:error_budget_remaining:30d * 100",
          "refId": "A"
        }
      ],
      "options": {
        "orientation": "auto",
        "showThresholdLabels": true,
        "showThresholdMarkers": true
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 1,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"value": null, "color": "red"},
              {"value": 25, "color": "orange"},
              {"value": 50, "color": "yellow"},
              {"value": 75, "color": "green"}
            ]
          },
          "max": 100,
          "min": 0
        }
      }
    },
    {
      "type": "gauge",
      "title": "Transaction Success Error Budget Remaining",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 8, "x": 8, "y": 8},
      "id": 21,
      "targets": [
        {
          "expr": "slo:transaction_success:error_budget_remaining:7d * 100",
          "refId": "A"
        }
      ],
      "options": {
        "orientation": "auto",
        "showThresholdLabels": true,
        "showThresholdMarkers": true
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 1,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"value": null, "color": "red"},
              {"value": 25, "color": "orange"},
              {"value": 50, "color": "yellow"},
              {"value": 75, "color": "green"}
            ]
          },
          "max": 100,
          "min": 0
        }
      }
    },
    {
      "type": "gauge",
      "title": "Database Availability Error Budget Remaining",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 8, "x": 16, "y": 8},
      "id": 22,
      "targets": [
        {
          "expr": "slo:db_availability:error_budget_remaining:24h * 100",
          "refId": "A"
        }
      ],
      "options": {
        "orientation": "auto",
        "showThresholdLabels": true,
        "showThresholdMarkers": true
      },
      "fieldConfig": {
        "defaults": {
          "unit": "percent",
          "decimals": 1,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"value": null, "color": "red"},
              {"value": 25, "color": "orange"},
              {"value": 50, "color": "yellow"},
              {"value": 75, "color": "green"}
            ]
          },
          "max": 100,
          "min": 0
        }
      }
    },
    {
      "type": "row",
      "title": "Error Budget Burn Rate",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 16},
      "id": 3,
      "collapsed": false
    },
    {
      "type": "graph",
      "title": "API Availability Error Budget Burn Rate",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 17},
      "id": 30,
      "description": "Burn rate > 1.0 means error budget will be exhausted before the 30-day window",
      "targets": [
        {
          "expr": "slo:api_availability:burn_rate:1h",
          "refId": "A",
          "legendFormat": "1 hour"
        },
        {
          "expr": "slo:api_availability:burn_rate:6h",
          "refId": "B",
          "legendFormat": "6 hours"
        },
        {
          "expr": "slo:api_availability:burn_rate:24h",
          "refId": "C",
          "legendFormat": "24 hours"
        },
        {
          "expr": "slo:api_availability:burn_rate:7d",
          "refId": "D",
          "legendFormat": "7 days"
        }
      ],
      "yaxes": [
        {
          "format": "short",
          "label": "Burn Rate (1.0 = normal)",
          "logBase": 10
        },
        {"format": "short"}
      ],
      "seriesOverrides": [
        {
          "alias": "/.*/",
          "lineWidth": 2
        }
      ],
      "thresholds": [
        {
          "value": 1,
          "colorMode": "critical",
          "op": "gt",
          "fill": true,
          "line": true
        }
      ]
    },
    {
      "type": "stat",
      "title": "Time to Error Budget Exhaustion",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 17},
      "id": 31,
      "description": "Days until error budget is exhausted at current 24h burn rate",
      "targets": [
        {
          "expr": "slo:api_availability:time_to_exhaustion_days",
          "refId": "A"
        }
      ],
      "options": {
        "reduceOptions": {
          "values": false,
          "calcs": ["lastNotNull"]
        },
        "orientation": "auto",
        "textMode": "value_and_name",
        "colorMode": "value",
        "graphMode": "none"
      },
      "fieldConfig": {
        "defaults": {
          "unit": "d",
          "decimals": 1,
          "thresholds": {
            "mode": "absolute",
            "steps": [
              {"value": null, "color": "red"},
              {"value": 7, "color": "orange"},
              {"value": 15, "color": "yellow"},
              {"value": 30, "color": "green"}
            ]
          }
        }
      }
    },
    {
      "type": "row",
      "title": "Historical SLO Compliance",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 25},
      "id": 4,
      "collapsed": false
    },
    {
      "type": "graph",
      "title": "API Availability Over Time",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 26},
      "id": 40,
      "targets": [
        {
          "expr": "slo:api_availability:success_ratio:30d * 100",
          "refId": "A",
          "legendFormat": "30-day Availability"
        },
        {
          "expr": "(1 - slo:api_availability:error_ratio:7d) * 100",
          "refId": "B",
          "legendFormat": "7-day Availability"
        },
        {
          "expr": "(1 - slo:api_availability:error_ratio:24h) * 100",
          "refId": "C",
          "legendFormat": "24-hour Availability"
        }
      ],
      "yaxes": [
        {
          "format": "percent",
          "label": "Availability %",
          "max": 100,
          "min": 99
        },
        {"format": "short"}
      ],
      "seriesOverrides": [
        {
          "alias": "30-day Availability",
          "lineWidth": 3,
          "color": "#1f77b4"
        }
      ],
      "thresholds": [
        {
          "value": 99.95,
          "colorMode": "custom",
          "op": "lt",
          "fill": true,
          "line": true,
          "fillColor": "rgba(255, 0, 0, 0.1)",
          "lineColor": "rgb(255, 0, 0)"
        }
      ]
    },
    {
      "type": "graph",
      "title": "Transaction Success Rate Over Time",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 26},
      "id": 41,
      "targets": [
        {
          "expr": "slo:transaction_success:success_ratio:7d * 100",
          "refId": "A",
          "legendFormat": "7-day Success Rate"
        },
        {
          "expr": "(1 - slo:transaction_success:error_ratio:24h) * 100",
          "refId": "B",
          "legendFormat": "24-hour Success Rate"
        },
        {
          "expr": "(1 - slo:transaction_success:error_ratio:1h) * 100",
          "refId": "C",
          "legendFormat": "1-hour Success Rate"
        }
      ],
      "yaxes": [
        {
          "format": "percent",
          "label": "Success Rate %",
          "max": 100,
          "min": 99
        },
        {"format": "short"}
      ],
      "thresholds": [
        {
          "value": 99.9,
          "colorMode": "custom",
          "op": "lt",
          "fill": true,
          "line": true,
          "fillColor": "rgba(255, 0, 0, 0.1)",
          "lineColor": "rgb(255, 0, 0)"
        }
      ]
    },
    {
      "type": "row",
      "title": "Latency SLO Tracking",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 34},
      "id": 5,
      "collapsed": false
    },
    {
      "type": "graph",
      "title": "API Latency P95/P99 vs SLO",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 35},
      "id": 50,
      "targets": [
        {
          "expr": "histogram_quantile(0.95, sum(rate(http_request_duration_seconds_bucket{app=\"transaction-api\"}[5m])) by (le)) * 1000",
          "refId": "A",
          "legendFormat": "P95 Latency"
        },
        {
          "expr": "histogram_quantile(0.99, sum(rate(http_request_duration_seconds_bucket{app=\"transaction-api\"}[5m])) by (le)) * 1000",
          "refId": "B",
          "legendFormat": "P99 Latency"
        }
      ],
      "yaxes": [
        {
          "format": "ms",
          "label": "Latency"
        },
        {"format": "short"}
      ],
      "thresholds": [
        {
          "value": 200,
          "colorMode": "custom",
          "op": "gt",
          "line": true,
          "lineColor": "rgb(255, 165, 0)"
        },
        {
          "value": 500,
          "colorMode": "custom",
          "op": "gt",
          "line": true,
          "lineColor": "rgb(255, 0, 0)"
        }
      ]
    },
    {
      "type": "graph",
      "title": "Transaction Processing Latency P95/P99 vs SLO",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 35},
      "id": 51,
      "targets": [
        {
          "expr": "histogram_quantile(0.95, sum(rate(transaction_processing_duration_seconds_bucket{app=\"transaction-api\"}[5m])) by (le))",
          "refId": "A",
          "legendFormat": "P95 Duration"
        },
        {
          "expr": "histogram_quantile(0.99, sum(rate(transaction_processing_duration_seconds_bucket{app=\"transaction-api\"}[5m])) by (le))",
          "refId": "B",
          "legendFormat": "P99 Duration"
        }
      ],
      "yaxes": [
        {
          "format": "s",
          "label": "Duration"
        },
        {"format": "short"}
      ],
      "thresholds": [
        {
          "value": 2,
          "colorMode": "custom",
          "op": "gt",
          "line": true,
          "lineColor": "rgb(255, 165, 0)"
        },
        {
          "value": 5,
          "colorMode": "custom",
          "op": "gt",
          "line": true,
          "lineColor": "rgb(255, 0, 0)"
        }
      ]
    },
    {
      "type": "row",
      "title": "Error Analysis",
      "gridPos": {"h": 1, "w": 24, "x": 0, "y": 43},
      "id": 6,
      "collapsed": false
    },
    {
      "type": "graph",
      "title": "Error Rate by Type",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 12, "x": 0, "y": 44},
      "id": 60,
      "targets": [
        {
          "expr": "sum(rate(http_requests_total{app=\"transaction-api\",status=~\"5..\"}[5m])) by (status)",
          "refId": "A",
          "legendFormat": "Status {{ status }}"
        }
      ],
      "yaxes": [
        {"format": "reqps", "label": "Errors/sec"},
        {"format": "short"}
      ]
    },
    {
      "type": "graph",
      "title": "Transaction Failures by Reason",
      "datasource": "Prometheus",
      "gridPos": {"h": 8, "w": 12, "x": 12, "y": 44},
      "id": 61,
      "targets": [
        {
          "expr": "sum(rate(transactions_failed_total{app=\"transaction-api\"}[5m])) by (reason)",
          "refId": "A",
          "legendFormat": "{{ reason }}"
        }
      ],
      "yaxes": [
        {"format": "tps", "label": "Failures/sec"},
        {"format": "short"}
      ]
    }
  ],
  "refresh": "1m",
  "schemaVersion": 27,
  "version": 1
}
